var IntervalInputs=Class.create({initialize:function(a,b){this.cssSelector=a,this.containers=$$(this.cssSelector),this.initOptions(b),this.interval(),this.observeInputs()},initOptions:function(a){this.options={intervalChar:"-",intervalWidth:1,intervalUnit:"em",scaleAttribute:"maxlength",autoFocusChange:!0,intervalDivClassName:"intervalDiv"},Object.extend(this.options,a||{})},interval:function(){this.containers.each(function(a){var b=a.select("input");b.each(function(a){a.getStyle("font-size").endsWith("px")?this.intervalUnitTmp="px":this.intervalUnitTmp=this.options.intervalUnit;var c=a.getStyle("font-size").empty()?18:parseInt(a.getStyle("font-size")),d=parseInt(a.readAttribute(this.options.scaleAttribute));a.setStyle({width:parseInt(d*c)+""+this.intervalUnitTmp,"float":"left"}),a!=b.last()&&a.insert({after:this.buildInterval()})}.bind(this)),a.insert({after:new Element("input",{type:"hidden",id:b.first().name+"-"+b.last().name,name:b.first().name+"-"+b.last().name})})}.bind(this))},observeInputs:function(){$$(this.cssSelector+" ["+this.options.scaleAttribute+"]").each(function(a){new Form.Element.Observer(a,.1,this.renderGroupInput.bind(this)),this.options.autoFocusChange&&new Form.Element.Observer(a,.1,this.maxLengthFocusChange.bind(this)),this.options.autoFocusChange&&a.on("keydown",this.backspaceFocusChange.bind(this))}.bind(this))},renderGroupInput:function(){this.containers.each(function(a){var b="",c=a.select("input");c.each(function(a){b+=$F(a)}.bind(this)),$(c.first().name+c.last().name).value=b}.bind(this))},maxLengthFocusChange:function(a){a.readAttribute(this.options.scaleAttribute)==$F(a).length&&Object.isElement(a.next("input"))&&(a.next("input").focus(),a.next("input").select())},backspaceFocusChange:function(a){var b=a.element();a.keyCode==Event.KEY_BACKSPACE&&$F(b).empty()&&Object.isElement(b.previous("input"))&&(b.previous("input").focus(),b.previous("input").select())},buildInterval:function(){var a=new Element("div");return a.setStyle({width:this.options.intervalWidth+""+this.options.intervalUnit,"float":"left",textAlign:"center"}),a.addClassName(this.options.intervalDivClassName),a.update(this.options.intervalChar),a}});